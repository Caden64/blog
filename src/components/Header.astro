---
let link = "https://caden32.com";
import ThemeToggle from "./ThemeToggle";
let blog = link + "/blog";
---

<html>
    <header
        id="header"
        class="flex items-center justify-between smd:px-4 py-2 bg-white text-pickled-bluewood-700 text-2xl mr-1 dark:bg-black dark:text-white w-full"
    >
        <button
            ><a href={link}
                ><span class="underline decoration-pickel-me-pink-400">C</span
                >aden 32</a
            >
        </button>
        <div class="text-underline grid grid-cols-3 gap-8" id="links">
            <button><a href={link}>Home</a></button>
            <button><a href={blog}>Blog</a></button>
             <ThemeToggle client:load />
        </div>
    </header>
    <style>
        #checkbox:checked + label .switch-ball {
            background-color: white;
            transform: translateX(24px);
            transition: transform 0.3s linear;
        }
    </style>

    <script lang="js">
        var themeToggleDarkIcon = document.getElementById(
            "theme-toggle-dark-icon"
        );
        var themeToggleLightIcon = document.getElementById(
            "theme-toggle-light-icon"
        );

        // Change the icons inside the button based on previous settings
        if (
            localStorage.getItem("color-theme") === "dark" ||
            (!("color-theme" in localStorage) &&
                window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
            themeToggleDarkIcon.classList.remove("hidden");
        } else {
            themeToggleLightIcon.classList.remove("hidden");
        }

        var themeToggleBtn = document.getElementById("theme-toggle");

        themeToggleBtn.addEventListener("click", function () {
            // toggle icons inside button
            themeToggleDarkIcon.classList.toggle("hidden");
            themeToggleLightIcon.classList.toggle("hidden");

            // if set via local storage previously
            if (localStorage.getItem("color-theme")) {
                // if NOT set via local storage previously
                toggle();
            } else {
                if (document.documentElement.classList.contains("dark")) {
                    document.documentElement.classList.remove("dark");
                    localStorage.setItem("color-theme", "light");
                } else {
                    document.documentElement.classList.add("dark");
                    localStorage.setItem("color-theme", "dark");
                }
            }
        });

        let toggle = function () {
            if (localStorage.getItem("color-theme") === "light") {
                document.documentElement.classList.add("dark");
                localStorage.setItem("color-theme", "dark");
            } else {
                document.documentElement.classList.remove("dark");
                localStorage.setItem("color-theme", "light");
            }
        };
        let start = function () {
            if (localStorage.getItem("color-theme") === "dark") {
                if (!document.documentElement.classList.contains("dark")) {
                    document.documentElement.classList.add("dark");
                }
                document.documentElement.classList.add("dark");
                localStorage.setItem("color-theme", "dark");
            } else {
                if (document.documentElement.classList.contains("dark")) {
                    document.documentElement.classList.remove("dark");
                }
                localStorage.setItem("color-theme", "light");
                if (document.documentElement.classList.contains("dark")) {
                    document.documentElement.classList.remove("dark");
                }
            }
        };

        window.onload = start();
    </script>


</html>
